<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Developer - Ernest</title>
    <meta name="generator" content="Hugo 0.30" />

    
    <meta name="description" content="Developer Driven Orchestration">
    
    <link rel="canonical" href="http://docs.ernest.io/developer/">
    
    <meta name="author" content="Ernestio">
    

    <meta property="og:url" content="http://docs.ernest.io/developer/">
    <meta property="og:title" content="Ernest">
    <meta property="og:image" content="http://docs.ernest.io/images/dog.png">
    <meta name="apple-mobile-web-app-title" content="Ernest">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://docs.ernest.io/images/dog.ico">
    <link rel="icon" type="image/x-icon" href="http://docs.ernest.io/images/dog.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://docs.ernest.io/fonts/icon.eot');
        src: url('http://docs.ernest.io/fonts/icon.eot')
               format('embedded-opentype'),
             url('http://docs.ernest.io/fonts/icon.woff')
               format('woff'),
             url('http://docs.ernest.io/fonts/icon.ttf')
               format('truetype'),
             url('http://docs.ernest.io/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://docs.ernest.io/stylesheets/application.css">
    <link rel="stylesheet" href="http://docs.ernest.io/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://docs.ernest.io/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://docs.ernest.io/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="http://docs.ernest.io/forms.css">
    
    <script src="http://docs.ernest.io/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-light-blue palette-accent-orange">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Developer
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/ernest_io" title="@ernest_io on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/ernestio" title="@ernestio on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/ernestio/ernest" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://docs.ernest.io/images/dog.png">
        </div>
      
      <div class="name">
        <strong>Ernest <span class="version">3.7.0</span></strong>
        
          <br>
          ernestio/ernest
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="http://docs.ernest.io/downloads/" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/ernestio/ernest/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Ernest" href="http://docs.ernest.io/">
	
	Ernest
</a>



  
</li>



<li>
  
    



<a  title="Getting started" href="http://docs.ernest.io/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Commands (CLI)" href="http://docs.ernest.io/commands/">
	
	Commands (CLI)
</a>



  
</li>



<li>
  
    



<a  title="Providers" href="http://docs.ernest.io/providers/">
	
	Providers
</a>



  
</li>



<li>
  
    



<a  title="Downloads" href="http://docs.ernest.io/downloads/">
	
	Downloads
</a>



  
</li>



<li>
  
    



<a class="current" title="Developer" href="http://docs.ernest.io/developer/">
	
	Developer
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Community" href="http://docs.ernest.io/community/">
	
	Community
</a>



  
</li>



<li>
  
    



<a  title="Support" href="http://docs.ernest.io/support/">
	
	Support
</a>



  
</li>



<li>
  
    



<a  title="License" href="http://docs.ernest.io/license/">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/ernest_io" target="_blank" title="@ernest_io on Twitter">
              @ernest_io on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/ernestio" target="_blank" title="@ernestio on GitHub">
              @ernestio on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:info@ernest.io" title="Email of info@ernest.io">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Developer </h1>

			

<h2 id="architecture-overview">Architecture overview</h2>

<p>Ernest is based on a microservice oriented architecture. The majority of the services are built using Go, however we still need to maintain some jruby based in order to interact with vCloud.</p>

<h2 id="naming-conventions">Naming conventions</h2>

<p>In order to keep it clean there are some naming conventions you need to follow in order to understand Ernest</p>

<h3 id="service-naming">Service Naming</h3>

<p>Every service family follows an easy to understand naming convention.</p>

<h3 id="connectors">Connectors</h3>

<p>A connector name will look like component-action-provider-component.</p>

<p>It is basically composed by some variable parts: - component : the component it represents: instances, networks, routers… - action : the action will implement: create, delete, update. Additionally you will find the action «all», which will represent is implementing all possible actions and component types. - provider : the provider is connecting to. AWS, vCloud…</p>

<h3 id="messages-naming">Messages naming</h3>

<p>All services on Ernest are communicating through <a href="https://nats.io/documentation/concepts/nats-messaging/">nats</a> messages. There is a naming convention for any message on the platform, and you can find it in different forms:</p>

<pre><code class="language-sh">
&lt;component&gt;.&lt;action&gt;.&lt;provider&gt;

# They are sending the necessary info from the adapter to be processed by a specific connector.
</code></pre>

<p>All these messages are replied with an appended «.done» or «.error» word to the subject, so the sender will know if the action was a success or a failure.</p>

<h1 id="component-message-structure">Component Message structure</h1>

<p>There are a number of internal fields used by components (always prefixed with <code>_</code>) that must be present:</p>

<ul>
<li><code>_action</code>:  The action required by the component. This can be one of <code>create</code>, <code>update</code>, <code>delete</code>, <code>find</code> or <code>get</code>.</li>
<li><code>_component</code>:  The component type, i.e. <code>instance</code>, <code>network</code>, <code>firewall</code>.</li>
<li><code>_component_id</code>:  The composite ID of the component. This is constructed by a components type and its name, i.e. <code>instance::web-1</code></li>
<li><code>_provider</code>:  The type of provider that the component will be provisioned on.</li>
<li><code>_state</code>:  The current state of the component. Can be one of <code>errored</code>, <code>waiting</code>, <code>running</code>, <code>completed</code></li>
</ul>

<p>These fields are leveraged by scheduler to construct the omitted event subject.</p>

<h2 id="service-structure">Service structure</h2>

<p>The microservices can be categorized into different families:</p>

<ul>
<li><p>The Public family holds every service with a public or private interface intended to be used by the end user [Api Gateway, Monit, Logger].</p></li>

<li><p>Data stores are a crud over nats interface to interact with persistent data.</p></li>

<li><p>The Definition Mapper maps the input yaml on a valid internal mapping.</p></li>

<li><p>The Scheduler takes care of processing the necessary steps to build a service.</p></li>

<li><p>Connectors are connecting Ernest with third party providers in order to process a component.</p></li>
</ul>

<p>We group these families into:</p>

<ul>
<li>Frontend (Public + Stores)</li>
<li>Backend (Mapper + Core + Connectors)</li>
</ul>

<h2 id="public">Public</h2>

<h3 id="api-gateway">API Gateway</h3>

<p>The api-gateway is exposing a public REST api, locked with JWT authentication, so every authenticated user can interact with its endpoints.</p>

<h3 id="monit">Monit</h3>

<p>This service is sending real time information about service creation to the end user by keeping a stream open with the client.</p>

<p>It is catching all internal messages and decides which ones will fire a new message through the stream</p>

<p>It exposes data streams through SSE(Server Side Events).</p>

<h3 id="logger">Logger</h3>

<p>Logger is listening at all events on the message bus and ofuscating sensible data and sending it to a third party logger system.</p>

<h2 id="data-stores">Data stores</h2>

<p>Microservices in this family are an interface to interact with persistent data. So you can query stored data through nats with messages including:</p>

<pre><code class="language-sh">entity.get
entity.find
entity.del
entity.set
</code></pre>

<p>There is a microservice for each entity on the system:</p>

<pre><code class="language-sh">datacenter-store

#Implements a nats interface to operate with datacenter stored data

user-store

#Will open a nats interface to operate with user stored data. Additionally it will manage all user sensible data encryption.

service-store

#Implements a nats interface to operate with service stored data

config-store

#Implements a nats interface to operate with system configuration, this configuration is based on a configuration file deployed on Ernest creation.

group-store

#Implements a nats interface to operate with groups stored data. System authorization levels are based on these groups
</code></pre>

<h2 id="definition-mapper">Definition mapper</h2>

<p>Definition mapper maps your input yaml/json file on to a valid internal struct at the time they do an initial validation.</p>

<pre><code class="language-sh">definition-mapper

#Validates and maps the provider specific yaml input to a valid internal service mapping. It's also is responsible for converting the internal mapping back to an input yaml when importing.
</code></pre>

<h2 id="scheduler">Scheduler</h2>

<p>Scheduler is a service to process actions associated with a given environment and it&rsquo;s components. It runs on top of nats.io.</p>

<p>Scheduler provides several key features:</p>

<ul>
<li>Dependency graph scheduling. Each component is scheduled based on its relation to other components and allows independant components to be provisioned in parallel.</li>
<li>Templating: You can use the templating system to fill some component details with other component properties.</li>
<li>External persistence: Scheduler will call an external service to persist the current state of the service build and its components.</li>
</ul>

<h3 id="quick-start">Quick start</h3>

<pre><code class="language-sh">#Install with git
git clone git@github.com:ernestio/scheduler.git

make deps &amp;&amp; make install

scheduler
</code></pre>

<h3 id="running-tests">Running tests</h3>

<pre><code class="language-sh">make dev-deps &amp;&amp; make test
</code></pre>

<h3 id="operation">Operation</h3>

<p>The scheduler will send a <code>components.verb.provider</code> for component. The order is defined by the dependencies specified on <code>edges</code> and will wait for <code>component.verb.provider.status</code>, where status can be <code>done</code> or <code>error</code>.</p>

<p>When a completed component event is received, the latest service mapping is retrieved from service store. The state of the component is then updated in both <code>changes</code> and <code>components</code>. The graph is then inspected for all dependants of the completed component. These dependant components are then scheduled when all of its dependencies are satisfied.</p>

<p>If an errored component is received, scheduler will wait for all other in flight components to complete before sending an error back to the user. No other components will be sent in this errored state.</p>

<p>The graph library utilised by the scheduler can be found at <a href="https://github.com/ernestio/graph">graph library</a>.</p>

<h3 id="external-dependencies">External Dependencies</h3>

<p>As scheduler does not provide any persistence system; it directly depends on service-store, and its communication is accomplished through nats.io.</p>

<h3 id="input-mapping">Input Mapping</h3>

<p>The input mapping defines the steps a scheduler must take to complete a build. The required fields for each component are:</p>

<ul>
<li><code>id</code>: The id of the service being provisioned.</li>
<li><code>action</code>: The action of the service</li>
<li><code>edges</code>: The edges define the directed connection between components, as defined by a <code>source</code> and a <code>destination</code>.</li>
<li><code>components</code>: This collection of components represents the <em>current</em> state of the service.</li>
<li><code>changes</code>: This collection of components represents the <em>desired</em> state of the service.</li>
</ul>

<p>This output is generated by defintion-mapper with execution ordering and dependencies configured before being sent to scheduler.</p>

<p>An example of the input json to scheduler:</p>

<pre><code class="language-json">{
    &quot;id&quot;: &quot;test-generated-id&quot;,
    &quot;action&quot;: &quot;service.delete&quot;,
    &quot;edges&quot;: [
        {
            &quot;destination&quot;: &quot;vpc::test-vpc&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;internet_gateway::test-vpc&quot;
        },
        {
            &quot;destination&quot;: &quot;vpc::test-vpc&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;firewall::test-vm&quot;
        },
        {
            &quot;destination&quot;: &quot;internet_gateway::test-vpc&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;network::test-dmz&quot;
        },
        {
            &quot;destination&quot;: &quot;vpc::test-vpc&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;firewall::test-elb&quot;
        },
        {
            &quot;destination&quot;: &quot;firewall::test-vm&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;instance::test-web-1&quot;
        },
        {
            &quot;destination&quot;: &quot;network::test-dmz&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;instance::test-web-1&quot;
        },
        {
            &quot;destination&quot;: &quot;firewall::test-elb&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;elb::test-elb&quot;
        },
        {
            &quot;destination&quot;: &quot;network::test-dmz&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;elb::test-elb&quot;
        },
        {
            &quot;destination&quot;: &quot;instance::test-web-1&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;elb::test-elb&quot;
        },
        {
            &quot;destination&quot;: &quot;end&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;vpc::test-vpc&quot;
        },
        {
            &quot;destination&quot;: &quot;elb::test-elb&quot;,
            &quot;length&quot;: 1,
            &quot;source&quot;: &quot;start&quot;
        }
    ],
    &quot;components&quot;: [
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;vpc&quot;,
            &quot;_component_id&quot;: &quot;vpc::test-vpc&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;waiting&quot;,
            &quot;auto_remove&quot;: true,
            &quot;name&quot;: &quot;test-vpc&quot;,
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;subnet&quot;: &quot;10.0.0.0/16&quot;,
            &quot;tags&quot;: {
                &quot;Name&quot;: &quot;test-vpc&quot;,
                &quot;ernest.service&quot;: &quot;test&quot;
            },
            &quot;vpc_aws_id&quot;: &quot;vpc-00000000&quot;
        },
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;internet_gateway&quot;,
            &quot;_component_id&quot;: &quot;internet_gateway::test-vpc&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;waiting&quot;,
            &quot;internet_gateway_aws_id&quot;: &quot;igw-00000000&quot;,
            &quot;name&quot;: &quot;test-vpc&quot;,
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;tags&quot;: {
                &quot;Name&quot;: &quot;test-vpc&quot;,
                &quot;ernest.service&quot;: &quot;test&quot;
            },
            &quot;vpc&quot;: &quot;test-vpc&quot;,
            &quot;vpc_id&quot;: &quot;vpc-00000000&quot;
        },
        {
            &quot;_action&quot;: &quot;none&quot;,
            &quot;_component&quot;: &quot;credentials&quot;,
            &quot;_component_id&quot;: &quot;credentials::aws&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;waiting&quot;,
            &quot;name&quot;: &quot;test-aws&quot;,
            &quot;region&quot;: &quot;eu-west-1&quot;
        }
    ],
    &quot;changes&quot;: [
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;vpc&quot;,
            &quot;_component_id&quot;: &quot;vpc::test-vpc&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;waiting&quot;,
            &quot;auto_remove&quot;: true,
            &quot;name&quot;: &quot;test-vpc&quot;,
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;subnet&quot;: &quot;10.0.0.0/16&quot;,
            &quot;tags&quot;: {
                &quot;Name&quot;: &quot;test-vpc&quot;,
                &quot;ernest.service&quot;: &quot;test&quot;
            },
            &quot;vpc_aws_id&quot;: &quot;vpc-00000000&quot;
        },
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;internet_gateway&quot;,
            &quot;_component_id&quot;: &quot;internet_gateway::test-vpc&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;running&quot;,
            &quot;internet_gateway_aws_id&quot;: &quot;igw-00000000&quot;,
            &quot;name&quot;: &quot;test-vpc&quot;,
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;tags&quot;: {
                &quot;Name&quot;: &quot;test-vpc&quot;,
                &quot;ernest.service&quot;: &quot;test&quot;
            },
            &quot;vpc&quot;: &quot;test-vpc&quot;,
            &quot;vpc_id&quot;: &quot;vpc-00000000&quot;
        },
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;firewall&quot;,
            &quot;_component_id&quot;: &quot;firewall::test-vm&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;completed&quot;,
            &quot;name&quot;: &quot;test-vm&quot;,
            &quot;network_aws_id&quot;: null,
            &quot;rules&quot;: {
                &quot;egress&quot;: [
                    {
                        &quot;from_port&quot;: 0,
                        &quot;ip&quot;: &quot;0.0.0.0/0&quot;,
                        &quot;protocol&quot;: &quot;-1&quot;,
                        &quot;to_port&quot;: 65535
                    }
                ],
                &quot;ingress&quot;: [
                    {
                        &quot;from_port&quot;: 0,
                        &quot;ip&quot;: &quot;10.0.0.0/16&quot;,
                        &quot;protocol&quot;: &quot;tcp&quot;,
                        &quot;to_port&quot;: 65535
                    }
                ]
            },
            &quot;security_group_aws_id&quot;: &quot;sg-00000000&quot;,
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;tags&quot;: {
                &quot;Name&quot;: &quot;test-vm&quot;,
                &quot;ernest.service&quot;: &quot;test&quot;
            },
            &quot;vpc&quot;: &quot;test-vpc&quot;,
            &quot;vpc_id&quot;: &quot;vpc-00000000&quot;
        },
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;network&quot;,
            &quot;_component_id&quot;: &quot;network::test-dmz&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;completed&quot;,
            &quot;availability_zone&quot;: &quot;eu-west-1a&quot;,        
            &quot;internet_gateway&quot;: &quot;test-vpc&quot;,
            &quot;internet_gateway_aws_id&quot;: &quot;igw-00000000&quot;,
            &quot;is_public&quot;: true,
            &quot;name&quot;: &quot;test-dmz&quot;,
            &quot;network_aws_id&quot;: &quot;subnet-00000000&quot;,
            &quot;range&quot;: &quot;10.0.11.0/24&quot;,
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;tags&quot;: {
                &quot;Name&quot;: &quot;test-dmz&quot;,
                &quot;ernest.service&quot;: &quot;test&quot;
            },
            &quot;vpc&quot;: &quot;test-vpc&quot;,
            &quot;vpc_id&quot;: &quot;vpc-00000000&quot;
        },
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;firewall&quot;,
            &quot;_component_id&quot;: &quot;firewall::test-elb&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;completed&quot;,
            &quot;name&quot;: &quot;test-elb&quot;,
            &quot;network_aws_id&quot;: null,
            &quot;rules&quot;: {
                &quot;egress&quot;: [
                    {
                        &quot;from_port&quot;: 0,
                        &quot;ip&quot;: &quot;0.0.0.0/0&quot;,
                        &quot;protocol&quot;: &quot;-1&quot;,
                        &quot;to_port&quot;: 65535
                    }
                ],
                &quot;ingress&quot;: [
                    {
                        &quot;from_port&quot;: 0,
                        &quot;ip&quot;: &quot;10.0.0.0/16&quot;,
                        &quot;protocol&quot;: &quot;tcp&quot;,
                        &quot;to_port&quot;: 65535
                    },
                    {
                        &quot;from_port&quot;: 80,
                        &quot;ip&quot;: &quot;0.0.0.0/0&quot;,
                        &quot;protocol&quot;: &quot;tcp&quot;,
                        &quot;to_port&quot;: 80
                    }
                ]
            },
            &quot;security_group_aws_id&quot;: &quot;sg-00000000&quot;,
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;tags&quot;: {
                &quot;Name&quot;: &quot;test-elb&quot;,
                &quot;ernest.service&quot;: &quot;test&quot;
            },
            &quot;vpc&quot;: &quot;test-vpc&quot;,
            &quot;vpc_id&quot;: &quot;vpc-00000000&quot;
        },
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;instance&quot;,
            &quot;_component_id&quot;: &quot;instance::test-web-1&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;completed&quot;,
            &quot;assign_elastic_ip&quot;: false,    
            &quot;elastic_ip&quot;: &quot;&quot;,
            &quot;image&quot;: &quot;ami-ed82e39e&quot;,
            &quot;instance_aws_id&quot;: &quot;i-00000000000000000&quot;,
            &quot;instance_type&quot;: &quot;t2.micro&quot;,
            &quot;ip&quot;: &quot;10.0.11.11&quot;,
            &quot;key_pair&quot;: &quot;test&quot;,
            &quot;name&quot;: &quot;test-web-1&quot;,
            &quot;network_aws_id&quot;: &quot;subnet-00000000&quot;,
            &quot;network_is_public&quot;: false,
            &quot;network_name&quot;: &quot;test-dmz&quot;,
            &quot;public_ip&quot;: &quot;52.48.98.107&quot;,
            &quot;security_group_aws_ids&quot;: [
                &quot;sg-00000000&quot;
            ],
            &quot;security_groups&quot;: [
                &quot;test-vm&quot;
            ],
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;tags&quot;: {
                &quot;Name&quot;: &quot;test-web-1&quot;,
                &quot;ernest.instance_group&quot;: &quot;test-web&quot;,
                &quot;ernest.service&quot;: &quot;test&quot;
            },
            &quot;user_data&quot;: &quot;&quot;,
            &quot;volumes&quot;: null
        },
        {
            &quot;_action&quot;: &quot;delete&quot;,
            &quot;_component&quot;: &quot;elb&quot;,
            &quot;_component_id&quot;: &quot;elb::test-elb&quot;,
            &quot;_provider&quot;: &quot;aws&quot;,
            &quot;_state&quot;: &quot;completed&quot;,
            &quot;dns_name&quot;: &quot;test-elb-1103626973.eu-west-1.elb.amazonaws.com&quot;,
            &quot;instance_aws_ids&quot;: [
                &quot;i-00000000000000000&quot;
            ],
            &quot;instance_names&quot;: [
                &quot;test-web-1&quot;
            ],
            &quot;instances&quot;: [
                &quot;test-web&quot;
            ],
            &quot;is_private&quot;: false,
            &quot;listeners&quot;: [
                {
                    &quot;from_port&quot;: 80,
                    &quot;protocol&quot;: &quot;HTTP&quot;,
                    &quot;ssl_cert&quot;: &quot;&quot;,
                    &quot;to_port&quot;: 80
                }
            ],
            &quot;name&quot;: &quot;test-elb&quot;,
            &quot;network_aws_ids&quot;: [
                &quot;subnet-00000000&quot;
            ],
            &quot;networks&quot;: [
                &quot;test-dmz&quot;
            ],
            &quot;security_group_aws_ids&quot;: [
                &quot;sg-00000000&quot;
            ],
            &quot;security_groups&quot;: [
                &quot;test-elb&quot;
            ],
            &quot;service&quot;: &quot;test-generated-id&quot;,
            &quot;tags&quot;: {
                &quot;ernest.service&quot;: &quot;test&quot;
            }
        }
    ]
}
</code></pre>

<p>You will find a more up to date documentation on the repo <a href="https://github.com/ernestio/scheduler/blob/develop/README.md">README</a></p>

<h2 id="connectors-1">Connectors</h2>

<p>A connector is a service which is directly interacting with the provider in order to process (get, create, update or delete) a component on the provider.</p>

<h2 id="testing">Testing</h2>

<h3 id="unit-testing">Unit testing</h3>

<p>Each service has its own test suite (per-service tests) based uniquely on how the specific service behaves.</p>

<h3 id="bdd-tests">BDD tests</h3>

<p>In order to test, and keep a live documentation of ernest-cli, we have implemented some end to end tests using <a href="https://github.com/gucumber/gucumber">gucumber</a> and <a href="https://github.com/cucumber/cucumber/wiki/Gherkin">gherkin</a>.</p>

<p>You can find the features definitions describing ernest behaviour <a href="https://github.com/ernestio/ernest-cli/tree/develop/internal/features/cli">here</a></p>

<h3 id="integration-tests">Integration tests</h3>

<p>As Ernest is a distributed system, it’s sometimes hard to have integration tests. This is why some key services have integration tests and per service tests.</p>

<p>These integration tests are building a partial Ernest environment with docker-compose, but they’re mocking all connectors with all-all-fake-connector which responds with what’s expected by the connectors.</p>


			<aside class="copyright" role="note">
				
				&copy; 2018 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="http://docs.ernest.io/downloads/" title="Downloads">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Downloads
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="http://docs.ernest.io/community/" title="Community">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Community
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'http:\/\/docs.ernest.io\/';
      var repo_id  = 'ernestio\/ernest';
    
    </script>

    <script src="http://docs.ernest.io/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-86033085-1', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
  
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-86033085-1', 'auto');
ga('send', 'pageview');
</script>

</html>

